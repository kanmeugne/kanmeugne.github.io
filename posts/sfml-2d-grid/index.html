<!DOCTYPE html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Drawing a 2D Grid with SFML" /><meta name="author" content="Patrick S. Kanmeugne" /><meta property="og:locale" content="en" /><meta name="description" content="I started studying simulation of moving agents ten years ago and I have come to realize that regular 2D Grids are extraordinary abstractions for the navigable space. In fact, regular 2D grids are very easy to encode and they offer an elegant framework for path planning and collision avoidance algorithms deployment." /><meta property="og:description" content="I started studying simulation of moving agents ten years ago and I have come to realize that regular 2D Grids are extraordinary abstractions for the navigable space. In fact, regular 2D grids are very easy to encode and they offer an elegant framework for path planning and collision avoidance algorithms deployment." /><link rel="canonical" href="https://kanmeugne.github.io/posts/sfml-2d-grid/" /><meta property="og:url" content="https://kanmeugne.github.io/posts/sfml-2d-grid/" /><meta property="og:site_name" content="Kanmeugne’s Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-09-29T00:00:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Drawing a 2D Grid with SFML" /><meta name="twitter:site" content="@patricksimok" /><meta name="twitter:creator" content="@patricksimok" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Patrick S. Kanmeugne","url":"http://kanmeugne.github.io/"},"dateModified":"2025-05-15T20:27:44+08:00","datePublished":"2020-09-29T00:00:00+08:00","description":"I started studying simulation of moving agents ten years ago and I have come to realize that regular 2D Grids are extraordinary abstractions for the navigable space. In fact, regular 2D grids are very easy to encode and they offer an elegant framework for path planning and collision avoidance algorithms deployment.","headline":"Drawing a 2D Grid with SFML","mainEntityOfPage":{"@type":"WebPage","@id":"https://kanmeugne.github.io/posts/sfml-2d-grid/"},"url":"https://kanmeugne.github.io/posts/sfml-2d-grid/"}</script><title>Drawing a 2D Grid with SFML | Kanmeugne's Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Kanmeugne's Blog"><meta name="application-name" content="Kanmeugne's Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/0.jpeg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Kanmeugne's Blog</a></div><div class="site-subtitle font-italic">stigmergy matters</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/kanmeugne" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/patricksimok" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['patrick.simokanmeugne','outlook.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Drawing a 2D Grid with SFML</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Drawing a 2D Grid with SFML</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1601308800" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Sep 29, 2020 </em> </span> <span> Updated <em class="" data-ts="1747312064" data-df="ll" data-toggle="tooltip" data-placement="bottom"> May 15, 2025 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="http://kanmeugne.github.io/">Patrick S. Kanmeugne</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2263 words"> <em>12 min</em> read</span></div></div></div><div class="post-content"><p>I started studying simulation of moving agents ten years ago and I have come to realize that regular 2D Grids are extraordinary abstractions for the navigable space. In fact, regular 2D grids are very easy to encode and they offer an elegant framework for path planning and collision avoidance algorithms deployment.</p><p><img data-src="/images/sfmlgrid.jpg" alt="2D Grid Poster" width="500" data-proofer-ignore> <em>Photo by <a href="https://unsplash.com/@glenncarstenspeters?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Glenn Carstens-Peters</a> on <a href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a></em></p><p>In this post, I am sharing an <em>object oriented architecture</em> — with its C++ implementation — that I am actually using in my personal projects when I need a 2D Grid. I hope that it could be an affordable starting point for anyone who is interested in the subject.</p><h2 id="architecture"><span class="mr-2">Architecture</span><a href="#architecture" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>To be very concrete, I am going to assume that I am building a simulation app — of moving agents — that uses a 2D grid as the navigable space model. The root <em>object oriented architecture</em> that I am using to tackle the implementation is outlined in <strong>Fig. 1.</strong> Basically, there is an application object called <em>App</em> and three other packages:</p><ul><li><em>env</em> : for the navigable space representation and manipulation objects<li><em>viewers</em> : for visualisation purposes<li><em>geometry</em> : for geometrical abstraction</ul><p>I am giving more details about <em>App</em>, <em>env</em>, <em>viewers</em> and <em>geometry</em> below.</p><p><object data="/uml/beb24e51e8974f7c2d5707b4840e93eb.svg" type="image/svg+xml" style="width:200" class="plantuml"></object></p><blockquote><p>Fig. 1. Architecture of our 2D Grid App</p></blockquote><div class="language-terminal highlighter-rouge"><div class="code-header"> <span data-label-text="Terminal"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre><td class="rouge-code"><pre><span class="go">sfml2dgrid
</span><span class="c">.
</span><span class="go">├── CMakeLists.txt
├── deps
│   └── sfml
│       └── CMakeLists.txt.in
└── sfml2dgrid
    ├── CMakeLists.txt
    ├── main.cpp
    ├── app
    │   ├── include
    │   │   └── App.h
    │   └── src
    │       └── App.cpp
    ├── env
    │   ├── include
    │   │   ├── Grid.h
    │   │   └── IGrid.h
    │   └── src
    │       └── Grid.cpp
    ├── geometry
    │   └── include
    │       └── geometry.h
    └── viewers
        ├── include
        │   ├── AbstractViewer.h
        │   └── GridViewer.h
        └── src
            ├── AbstractViewer.cpp
            └── GridViewer.cpp
</span></pre></table></code></div></div><blockquote><p>The file tree of the project with the source (.cpp) and header (.h) files that I am going to discuss about in the rest of the post</p></blockquote><h3 id="app--the-application-object"><span class="mr-2">App : the Application Object</span><a href="#app--the-application-object" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The <em>App</em> object is the definition of our application — see <strong>Fig.2.</strong></p><p>It holds a viewer (<em>viewers::AbstractViewer</em>) — that contains display instructions — and a reference to a 2D Grid (<em>env::IGrid</em>) — that will be used to manipulate the 2D grid. Note that the <em>App</em> object has an <em>SFML window</em> as a private attribute — this is where the rendering will occurs.</p><p><object data="/uml/204b5c073ca9f1601e9693d2c9c81bb8.svg" type="image/svg+xml" style="width:200" class="plantuml"></object></p><blockquote><p>Fig. 2. <code class="language-plaintext highlighter-rouge">App</code> object is attached to a viewer (<code class="language-plaintext highlighter-rouge">AbstractViewer</code>) and controls a 2D Grid (<code class="language-plaintext highlighter-rouge">IGrid</code>)</p></blockquote><p><em>App</em> also defines two important methods :</p><ul><li><em>App::run</em> : responsible of the simulation logic<li><em>App::display</em> : responsible of the display (what we see on the screen).</ul><p><strong>App.h</strong></p><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
</pre><td class="rouge-code"><pre>
<span class="cp">#ifndef APP_H
#define APP_H
</span>
<span class="k">namespace</span> <span class="n">sf</span>
<span class="p">{</span>
	<span class="k">class</span> <span class="nc">RenderWindow</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">namespace</span> <span class="n">env</span>
<span class="p">{</span>
	<span class="k">class</span> <span class="nc">IGrid</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">namespace</span> <span class="n">viewers</span>
<span class="p">{</span>
	<span class="k">class</span> <span class="nc">AbstractViewer</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">App</span>
<span class="p">{</span>
<span class="nl">private:</span>
	<span class="c1">// sfml render window</span>
	<span class="n">sf</span><span class="o">::</span><span class="n">RenderWindow</span> <span class="o">*</span><span class="n">_window</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">;</span>
	<span class="c1">// the 2D grid pointer</span>
	<span class="n">env</span><span class="o">::</span><span class="n">IGrid</span> <span class="o">*</span><span class="n">_grid</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">;</span>
	<span class="c1">// a pointer to the viewer</span>
	<span class="c1">// this could be a set of viewer actually</span>
	<span class="c1">// if we consider component behavior</span>
	<span class="n">viewers</span><span class="o">::</span><span class="n">AbstractViewer</span> <span class="o">*</span><span class="n">_viewer</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">;</span>

<span class="nl">public:</span>
	<span class="c1">// theorical width of the environment</span>
	<span class="c1">// will match the grid width in terms of number of cells.</span>
	<span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">DEFAULT_WIDTH</span><span class="p">;</span>
	<span class="c1">// theorical height of the environment.</span>
	<span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">DEFAULT_HEIGHT</span><span class="p">;</span>
	<span class="c1">// x-resolution of the grid i.e. the x-size of a cell</span>
	<span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">DEFAULT_RESX</span><span class="p">;</span>
	<span class="c1">// y-resolution of the grid i.e. the y-size of a cell</span>
	<span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">DEFAULT_RESY</span><span class="p">;</span>
	<span class="c1">// attach window to the app</span>
	<span class="kt">void</span> <span class="n">setWindow</span><span class="p">(</span><span class="n">sf</span><span class="o">::</span><span class="n">RenderWindow</span> <span class="o">*</span><span class="p">);</span>
	<span class="c1">// attach a specific viewer</span>
	<span class="kt">void</span> <span class="n">setViewer</span><span class="p">(</span><span class="n">viewers</span><span class="o">::</span><span class="n">AbstractViewer</span> <span class="o">*</span><span class="p">);</span>
	<span class="c1">// attach a grid (should have been initialized)</span>
	<span class="kt">void</span> <span class="n">setGrid</span><span class="p">(</span><span class="n">env</span><span class="o">::</span><span class="n">IGrid</span> <span class="o">*</span><span class="p">);</span>
	<span class="c1">// return the attached grid</span>
	<span class="n">env</span><span class="o">::</span><span class="n">IGrid</span> <span class="o">*</span><span class="n">getGrid</span><span class="p">();</span>
	<span class="c1">// return the attached window</span>
	<span class="n">sf</span><span class="o">::</span><span class="n">RenderWindow</span> <span class="o">*</span><span class="n">getWindow</span><span class="p">();</span>
	<span class="c1">// run the application (the logic)</span>
	<span class="kt">void</span> <span class="n">run</span><span class="p">();</span>
	<span class="c1">// show content (display routines)</span>
	<span class="kt">void</span> <span class="n">display</span><span class="p">();</span>

	<span class="n">App</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
	<span class="k">virtual</span> <span class="o">~</span><span class="n">App</span><span class="p">();</span>
<span class="p">};</span>
<span class="cp">#endif // !APP_H
</span></pre></table></code></div></div><blockquote><p>In the <em>App.h</em> file, I have defined static attributes — <em>DEFAULT_WIDTH</em>, <em>DEFAULT_HEIGHT</em>, <em>DEFAULT_RESX</em>, <em>DEFAULT_RESY</em> — to set the default dimensions of a grid in the application.</p></blockquote><h3 id="abstractviewer-gridviewer-and-the-geometry-package"><span class="mr-2"><em>AbstractViewer</em>, GridViewer and the <em>geometry</em> Package</span><a href="#abstractviewer-gridviewer-and-the-geometry-package" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><em>AbstractViewer</em> is meant to be derivated according to what we want to show on the application window — for instance, <em>GridViewer</em> is a specific implementation of <em>AbstractViewer</em> that uses the <em>geometry</em> package to draw the grid lines.</p><h4 id="abstractviewer--the-generic-definition-of-a-viewer"><span class="mr-2">AbstractViewer : The Generic Definition of a Viewer</span><a href="#abstractviewer--the-generic-definition-of-a-viewer" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><em>AbstractViewer</em> is always attached to an <em>App</em> object — see <strong>Fig.3</strong> — and defines a protected abstract method called <em>AbstractViewer::iDraw</em> — implemented in its inherited classes. <em>AbstractViewer::iDraw</em> is called by the public method <em>AbstractViewer::iDisplay</em> when necessary — that will be in the <em>App::display</em> function.</p><p><object data="/uml/4b6760915907467f46b6d28b662e7b45.svg" type="image/svg+xml" style="width:200" class="plantuml"></object></p><blockquote><p>Fig. 3. <code class="language-plaintext highlighter-rouge">GridViewer</code> is a specific viewer (i.e. inherits from <code class="language-plaintext highlighter-rouge">AbstractViewer</code>) in charge of drawing the lines (horizontal and vertical) of the grid. It uses the <code class="language-plaintext highlighter-rouge">geometry</code> package</p></blockquote><p><strong>AbstractViewer.h</strong></p><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre>
<span class="cp">#ifndef ABSTRACTVIEWER_H
#define ABSTRACTVIEWER_H
</span>
<span class="k">class</span> <span class="nc">App</span><span class="p">;</span>

<span class="k">namespace</span> <span class="n">viewers</span>
<span class="p">{</span>
	<span class="c1">// AbstractViewer</span>
	<span class="k">class</span> <span class="nc">AbstractViewer</span>
	<span class="p">{</span>
	<span class="nl">public:</span>
		<span class="c1">// activate the viewer. If activated, it provides the desired view</span>
		<span class="k">virtual</span> <span class="kt">void</span> <span class="n">iActivate</span><span class="p">();</span>
		<span class="c1">// deactivate the viewer. Do not display anaything if deactivated</span>
		<span class="k">virtual</span> <span class="kt">void</span> <span class="n">iDeactivate</span><span class="p">();</span>
		<span class="c1">// return True if the viewer is active</span>
		<span class="k">virtual</span> <span class="kt">bool</span> <span class="n">iIsActive</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
		<span class="c1">// display function</span>
		<span class="k">virtual</span> <span class="kt">void</span> <span class="n">iDisplay</span><span class="p">();</span>
		<span class="c1">// attach the application object</span>
		<span class="k">virtual</span> <span class="kt">void</span> <span class="n">iSetApp</span><span class="p">(</span><span class="n">App</span> <span class="o">*</span><span class="p">);</span>

		<span class="k">virtual</span> <span class="o">~</span><span class="n">AbstractViewer</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
		<span class="n">AbstractViewer</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>

	<span class="nl">protected:</span>
		<span class="c1">// specific draw method (to be concretized in child classes)</span>
		<span class="k">virtual</span> <span class="kt">void</span> <span class="n">iDraw</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="c1">// if active the viewer is automatically activated</span>
		<span class="kt">bool</span> <span class="n">_active</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
		<span class="c1">// reference to the attached app</span>
		<span class="n">App</span> <span class="o">*</span><span class="n">_app</span><span class="p">;</span>
	<span class="p">};</span>
<span class="p">}</span> <span class="c1">// namespace viewers</span>

<span class="cp">#endif // !ABSTRACTVIEWER_H
</span></pre></table></code></div></div><blockquote><p><em>AbstractViewer</em> is always attached to an <em>App</em> object and defines a protected abstract method called <em>AbstractViewer::iDraw</em>.</p></blockquote><h4 id="gridviewer--the-grid-lines-viewer"><span class="mr-2">GridViewer : the Grid Lines Viewer</span><a href="#gridviewer--the-grid-lines-viewer" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>For the exercice, we will define <em>GridViewer</em> as our only viewer, reponsible of displaying the lines of the 2D Grid. The private methods defined in <em>GridViewer</em> are :</p><ul><li><em>initialize</em> : to build the set of segments to be displayed<li><em>drawLine</em> : to call the graphic engine and draw every segment built during the initialization step <em>initialize</em><li><em>iDraw</em> : to call the above methods in the right order.</ul><p><strong>GridViewer.h</strong></p><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="cp">#ifndef GRIDVIEWER_H
#define GRIDVIEWER_H
</span>
<span class="cp">#include</span> <span class="cpf">"AbstractViewer.h"</span><span class="cp">
#include</span> <span class="cpf">"geometry.h"</span><span class="cp">
#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
</span>
<span class="k">namespace</span> <span class="n">viewers</span>
<span class="p">{</span>
	<span class="k">class</span> <span class="nc">GridViewer</span> <span class="o">:</span> <span class="k">public</span> <span class="n">AbstractViewer</span>
	<span class="p">{</span>
	<span class="nl">public:</span>
		<span class="n">GridViewer</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
		<span class="k">virtual</span> <span class="kt">void</span> <span class="n">initialize</span><span class="p">();</span>
		<span class="k">virtual</span> <span class="o">~</span><span class="n">GridViewer</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>

	<span class="nl">protected:</span>
		<span class="k">virtual</span> <span class="kt">void</span> <span class="n">iDraw</span><span class="p">();</span>

	<span class="nl">private:</span>
		<span class="kt">void</span> <span class="n">drawLines</span><span class="p">(</span><span class="n">geometry</span><span class="o">::</span><span class="n">ISegmentFunctor</span> <span class="o">&amp;</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
		<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">geometry</span><span class="o">::</span><span class="n">Segment</span><span class="o">&gt;</span> <span class="n">_lines</span><span class="p">;</span>
	<span class="p">};</span>
<span class="p">}</span> <span class="c1">// namespace viewers</span>
<span class="cp">#endif // !GRIDVIEWER_H
</span></pre></table></code></div></div><blockquote><p>We define <em>GridViewer</em> as our only viewer, reponsible of displaying the lines of the 2D Grid</p></blockquote><h4 id="the-geometry-package"><span class="mr-2">The <em>geometry</em> Package</span><a href="#the-geometry-package" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Here is the full description of our modest <em>geometry</em> package.</p><p>It contains the following objects :</p><ul><li><em>Point</em> : a 2D point definition, actually a pair of integers<li><em>Segment</em> : the definition of a segment — a pair of <em>Point</em><li><em>ISegmentFunctor</em> : an interface, meant to be realised by functors that applies on <em>Segment</em></ul><p><strong>geometry.h</strong></p><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="cp">#ifndef GEOMETRY_H
#define GEOMETRY_H
</span>
<span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp">
</span>
<span class="k">namespace</span> <span class="n">geometry</span>
<span class="p">{</span>
	<span class="c1">// definition of a point (typedef is sufficient)</span>
	<span class="k">typedef</span> <span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">Point</span><span class="p">;</span>
	<span class="c1">// definition of a segment (typedef is sufficient)</span>
	<span class="k">typedef</span> <span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">Point</span><span class="p">,</span> <span class="n">Point</span><span class="o">&gt;</span> <span class="n">Segment</span><span class="p">;</span>

	<span class="c1">// Functor definition to apply on segment</span>
	<span class="c1">// We can inherit from this to function</span>
	<span class="c1">// to apply display instruction on segments</span>
	<span class="k">class</span> <span class="nc">ISegmentFunctor</span> <span class="p">{</span>
	<span class="nl">public:</span>
		<span class="c1">// operator function to apply on each segment </span>
		<span class="c1">// (should concretized according to the need)</span>
		<span class="k">virtual</span> <span class="kt">void</span> <span class="k">operator</span><span class="p">()(</span>
			<span class="k">const</span> <span class="n">Segment</span><span class="o">&amp;</span> <span class="c1">// cell_id</span>
		<span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">};</span>
<span class="p">}</span>
<span class="cp">#endif // !GEOMETRY_H
</span></pre></table></code></div></div><blockquote><p>Our very modest geometry package contains <em>geometry::Point</em>, <em>geometry::Segment</em> and <em>geometry::ISegmentFunctor</em>.</p></blockquote><h3 id="the-2d-grid"><span class="mr-2">The 2D Grid</span><a href="#the-2d-grid" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The most important features of our 2D grid are defined in the <em>IGrid</em> interface — see <strong>Fig.4</strong>. <em>IGrid</em> is realized by the <em>Grid</em> object which is composed of grid cells — note that the <em>CELL</em> object is defined in <em>IGrid.h</em>.</p><p><object data="/uml/08b9369601865a868fce1d4009b37041.svg" type="image/svg+xml" style="width:200" class="plantuml"></object></p><blockquote><p>Fig. 4. <code class="language-plaintext highlighter-rouge">Grid</code> realizes the interface of a 2D grid, defined in <code class="language-plaintext highlighter-rouge">IGrid</code></p></blockquote><p><strong>IGrid.h</strong></p><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
</pre><td class="rouge-code"><pre><span class="cp">#ifndef IGRID_H
#define IGRID_H
</span>
<span class="k">namespace</span> <span class="n">env</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="nc">CELL</span>
	<span class="p">{</span>
		<span class="kt">int</span> <span class="n">_id</span><span class="p">;</span> <span class="c1">// id of the cell</span>
		<span class="n">CELL</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
		<span class="n">CELL</span><span class="p">(</span><span class="k">const</span> <span class="n">CELL</span> <span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
	<span class="p">};</span>

	<span class="k">class</span> <span class="nc">IGrid</span>
	<span class="p">{</span>
	<span class="nl">public:</span>
		<span class="k">virtual</span> <span class="o">~</span><span class="n">IGrid</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
		<span class="c1">// returns the width</span>
		<span class="k">virtual</span> <span class="kt">int</span> <span class="n">iGetSizeX</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="c1">// return the height</span>
		<span class="k">virtual</span> <span class="kt">int</span> <span class="n">iGetSizeY</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="c1">// return the number of cells in the grid</span>
		<span class="k">virtual</span> <span class="kt">int</span> <span class="n">iGetNumberOfCells</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="c1">// get the width of a cell (in terms of pixels)</span>
		<span class="k">virtual</span> <span class="kt">int</span> <span class="n">iGetResolutionX</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="c1">// get the height of a cell (in terms of pixels)</span>
		<span class="k">virtual</span> <span class="kt">int</span> <span class="n">iGetResolutionY</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="c1">//-- Test</span>
		<span class="c1">// relative position of a cell according to its id</span>
		<span class="k">virtual</span> <span class="kt">bool</span> <span class="n">iGetCellPosition</span><span class="p">(</span>
			<span class="k">const</span> <span class="n">CELL</span> <span class="o">&amp;</span><span class="p">,</span> <span class="c1">// cell</span>
			<span class="kt">int</span> <span class="o">&amp;</span><span class="p">,</span>        <span class="c1">// posx</span>
			<span class="kt">int</span> <span class="o">&amp;</span><span class="p">,</span>        <span class="c1">// posy</span>
		<span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="c1">// coordinates of a cell accoring to its id</span>
		<span class="k">virtual</span> <span class="kt">bool</span> <span class="n">iGetCellCoordinates</span><span class="p">(</span>
			<span class="k">const</span> <span class="n">CELL</span> <span class="o">&amp;</span><span class="p">,</span> <span class="c1">// cell</span>
			<span class="kt">int</span> <span class="o">&amp;</span><span class="p">,</span>        <span class="c1">// row_number</span>
			<span class="kt">int</span> <span class="o">&amp;</span>         <span class="c1">// column_number</span>
		<span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="c1">// cell rank of the the cell according</span>
		<span class="c1">// to its relative position in the grid</span>
		<span class="k">virtual</span> <span class="kt">bool</span> <span class="n">iGetCellNumber</span><span class="p">(</span>
			<span class="kt">int</span><span class="p">,</span> <span class="c1">// row_number</span>
			<span class="kt">int</span><span class="p">,</span> <span class="c1">// column_number</span>
			<span class="n">CELL</span> <span class="o">&amp;</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="c1">// the containing cell given the coordinates in the 2D space</span>
		<span class="k">virtual</span> <span class="kt">bool</span> <span class="n">iGetContainingCell</span><span class="p">(</span>
			<span class="kt">int</span><span class="p">,</span>   <span class="c1">// posx</span>
			<span class="kt">int</span><span class="p">,</span>   <span class="c1">// posy</span>
			<span class="n">CELL</span> <span class="o">&amp;</span> <span class="c1">// cell</span>
		<span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="c1">// check if a given point is within a given cell</span>
		<span class="k">virtual</span> <span class="kt">bool</span> <span class="n">iIsWithinCell</span><span class="p">(</span>
			<span class="kt">int</span><span class="p">,</span>         <span class="c1">// posx</span>
			<span class="kt">int</span><span class="p">,</span>         <span class="c1">// posy</span>
			<span class="k">const</span> <span class="n">CELL</span> <span class="o">&amp;</span> <span class="c1">// cell</span>
		<span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="c1">// initialize the vector of cells, obstacle mask, etc.</span>
		<span class="k">virtual</span> <span class="kt">void</span> <span class="n">iInitialize</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">};</span>
<span class="p">}</span> <span class="c1">// namespace env</span>
<span class="cp">#endif // !IGRID_H
</span></pre></table></code></div></div><blockquote><p>The features of the 2D grid are defined in <em>IGrid.h</em> — <em>IGrid.h</em> also contains the definition of the <em>CELL</em> object.</p></blockquote><p><strong>Grid.h</strong></p><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
</pre><td class="rouge-code"><pre><span class="cp">#ifndef GRID_H
#define GRID_H
</span>
<span class="cp">#include</span> <span class="cpf">"IGrid.h"</span><span class="cp">
#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
</span>
<span class="k">namespace</span> <span class="n">env</span>
<span class="p">{</span>
	<span class="k">const</span> <span class="kt">int</span> <span class="n">DEFAULT_GRID_SIZEX</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
	<span class="k">const</span> <span class="kt">int</span> <span class="n">DEFAULT_GRID_SIZEY</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
	<span class="k">const</span> <span class="kt">int</span> <span class="n">DEFAULT_RESOLUTIONX</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="k">const</span> <span class="kt">int</span> <span class="n">DEFAULT_RESOLUTIONY</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

	<span class="k">class</span> <span class="nc">Grid</span> <span class="o">:</span> <span class="k">public</span> <span class="n">IGrid</span>
	<span class="p">{</span>
	<span class="nl">public:</span>
		<span class="k">virtual</span> <span class="o">~</span><span class="n">Grid</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
		<span class="n">Grid</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
		<span class="c1">//-- Getters</span>
		<span class="k">virtual</span> <span class="kt">int</span> <span class="n">iGetSizeX</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
		<span class="k">virtual</span> <span class="kt">int</span> <span class="n">iGetSizeY</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
		<span class="k">virtual</span> <span class="kt">int</span> <span class="n">iGetNumberOfCells</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
		<span class="k">virtual</span> <span class="kt">int</span> <span class="n">iGetResolutionX</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
		<span class="k">virtual</span> <span class="kt">int</span> <span class="n">iGetResolutionY</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
		<span class="c1">// Test</span>
		<span class="k">virtual</span> <span class="kt">bool</span> <span class="n">iGetCellPosition</span><span class="p">(</span><span class="k">const</span> <span class="n">CELL</span> <span class="o">&amp;</span><span class="p">,</span> <span class="kt">int</span> <span class="o">&amp;</span><span class="p">,</span> <span class="kt">int</span> <span class="o">&amp;</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
		<span class="k">virtual</span> <span class="kt">bool</span> <span class="n">iGetCellCoordinates</span><span class="p">(</span><span class="k">const</span> <span class="n">CELL</span> <span class="o">&amp;</span><span class="p">,</span> <span class="kt">int</span> <span class="o">&amp;</span><span class="p">,</span> <span class="kt">int</span> <span class="o">&amp;</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
		<span class="k">virtual</span> <span class="kt">bool</span> <span class="n">iGetCellNumber</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="n">CELL</span> <span class="o">&amp;</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
		<span class="k">virtual</span> <span class="kt">bool</span> <span class="n">iGetContainingCell</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="n">CELL</span> <span class="o">&amp;</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
		<span class="k">virtual</span> <span class="kt">bool</span> <span class="n">iIsWithinCell</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="k">const</span> <span class="n">CELL</span> <span class="o">&amp;</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
		<span class="k">virtual</span> <span class="kt">void</span> <span class="n">iInitialize</span><span class="p">();</span>
		<span class="c1">//-- Setters</span>
		<span class="kt">void</span> <span class="n">setSizeX</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>
		<span class="kt">void</span> <span class="n">setSizeY</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>
		<span class="kt">void</span> <span class="n">setResolutionX</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>
		<span class="kt">void</span> <span class="n">setResolutionY</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>

	<span class="nl">private:</span>
		<span class="kt">int</span> <span class="n">_sizex</span> <span class="o">=</span> <span class="n">DEFAULT_GRID_SIZEX</span><span class="p">;</span>
		<span class="kt">int</span> <span class="n">_sizey</span> <span class="o">=</span> <span class="n">DEFAULT_GRID_SIZEY</span><span class="p">;</span>
		<span class="kt">int</span> <span class="n">_resolutionx</span> <span class="o">=</span> <span class="n">DEFAULT_RESOLUTIONX</span><span class="p">;</span>
		<span class="kt">int</span> <span class="n">_resolutiony</span> <span class="o">=</span> <span class="n">DEFAULT_RESOLUTIONY</span><span class="p">;</span>
		<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">CELL</span><span class="o">&gt;</span> <span class="n">_cells</span><span class="p">;</span>
	<span class="p">};</span>
<span class="p">}</span> <span class="c1">// namespace env</span>
<span class="cp">#endif // !GRID_H
</span></pre></table></code></div></div><blockquote><p>The <em>Grid</em> object realizes the <em>IGrid</em> interface.</p></blockquote><h2 id="demo"><span class="mr-2">Demo</span><a href="#demo" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Our 2D Grid app architecture is now complete! The build strategy is exactly the same as what we have presented in a <a href="/posts/sfml-cmake-windows" title="Kanmeugne's Blog : Building a Portable C++ Graphical App with CMake">previous post</a> — we refer the reader to that post for more details. The main file for the demo contains the following :</p><p><strong>main.cpp</strong></p><figure class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="cp">#include</span> <span class="cpf">"App.h"</span><span class="cp">
#include</span> <span class="cpf">"GridViewer.h"</span><span class="cp">
#include</span> <span class="cpf">"Grid.h"</span><span class="cp">
#include</span> <span class="cpf">&lt;thread&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;SFML/Graphics.hpp&gt;</span><span class="cp">
</span>
<span class="cp">#ifdef __linux__
#include</span> <span class="cpf">&lt;X11/Xlib.h&gt;</span><span class="cp">
#endif
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="cp">#ifdef __linux__
</span>    <span class="n">XInitThreads</span><span class="p">();</span>
<span class="cp">#endif
</span>    <span class="c1">// -- sfml windows</span>
    <span class="n">sf</span><span class="o">::</span><span class="n">ContextSettings</span> <span class="n">settings</span><span class="p">;</span>
    <span class="n">settings</span><span class="p">.</span><span class="n">antialiasingLevel</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
    <span class="n">sf</span><span class="o">::</span><span class="n">RenderWindow</span> <span class="n">window</span><span class="p">(</span>
        <span class="n">sf</span><span class="o">::</span><span class="n">VideoMode</span><span class="p">(</span>
            <span class="p">(</span><span class="n">App</span><span class="o">::</span><span class="n">DEFAULT_WIDTH</span><span class="o">*</span><span class="n">App</span><span class="o">::</span><span class="n">DEFAULT_RESX</span><span class="p">),</span>
            <span class="p">(</span><span class="n">App</span><span class="o">::</span><span class="n">DEFAULT_HEIGHT</span><span class="o">*</span><span class="n">App</span><span class="o">::</span><span class="n">DEFAULT_RESY</span><span class="p">)</span>
        <span class="p">),</span>
        <span class="s">"SFML 2D Grid"</span><span class="p">,</span>
        <span class="n">sf</span><span class="o">::</span><span class="n">Style</span><span class="o">::</span><span class="n">Titlebar</span> <span class="o">|</span> <span class="n">sf</span><span class="o">::</span><span class="n">Style</span><span class="o">::</span><span class="n">Close</span><span class="p">,</span>
        <span class="n">settings</span>
    <span class="p">);</span>
    <span class="n">window</span><span class="p">.</span><span class="n">clear</span><span class="p">(</span><span class="n">sf</span><span class="o">::</span><span class="n">Color</span><span class="o">::</span><span class="n">White</span><span class="p">);</span>
    <span class="n">window</span><span class="p">.</span><span class="n">setFramerateLimit</span><span class="p">(</span><span class="mi">120</span><span class="p">);</span>
    <span class="n">window</span><span class="p">.</span><span class="n">setActive</span><span class="p">(</span><span class="nb">false</span><span class="p">);</span>
    
    <span class="c1">// -- application</span>
    <span class="n">App</span> <span class="n">app</span><span class="p">;</span>
    <span class="n">app</span><span class="p">.</span><span class="n">setWindow</span><span class="p">(</span><span class="o">&amp;</span><span class="n">window</span><span class="p">);</span>
    
    <span class="c1">//-- grid 2D</span>
    <span class="n">Grid</span> <span class="n">g</span><span class="p">;</span>
    <span class="n">g</span><span class="p">.</span><span class="n">setSizeX</span><span class="p">(</span><span class="n">App</span><span class="o">::</span><span class="n">DEFAULT_WIDTH</span><span class="p">);</span>
    <span class="n">g</span><span class="p">.</span><span class="n">setSizeY</span><span class="p">(</span><span class="n">App</span><span class="o">::</span><span class="n">DEFAULT_HEIGHT</span><span class="p">);</span>
    <span class="n">g</span><span class="p">.</span><span class="n">setResolutionX</span><span class="p">(</span><span class="n">App</span><span class="o">::</span><span class="n">DEFAULT_RESX</span><span class="p">);</span>
    <span class="n">g</span><span class="p">.</span><span class="n">setResolutionY</span><span class="p">(</span><span class="n">App</span><span class="o">::</span><span class="n">DEFAULT_RESY</span><span class="p">);</span>
    <span class="n">g</span><span class="p">.</span><span class="n">iInitialize</span><span class="p">();</span>
    <span class="n">app</span><span class="p">.</span><span class="n">setGrid</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g</span><span class="p">);</span>
    
    <span class="c1">//-- viewer</span>
    <span class="n">GridViewer</span> <span class="n">gviewer</span><span class="p">;</span>
    <span class="n">app</span><span class="p">.</span><span class="n">setViewer</span><span class="p">(</span><span class="o">&amp;</span><span class="n">gviewer</span><span class="p">);</span>
    <span class="n">gviewer</span><span class="p">.</span><span class="n">initialize</span><span class="p">();</span>
    <span class="n">gviewer</span><span class="p">.</span><span class="n">iActivate</span><span class="p">();</span>
    
    <span class="c1">//-- launch application</span>
    <span class="n">std</span><span class="o">::</span><span class="kr">thread</span> <span class="n">rendering_thread</span><span class="p">(</span><span class="o">&amp;</span><span class="n">App</span><span class="o">::</span><span class="n">display</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">app</span><span class="p">);</span>
    <span class="n">app</span><span class="p">.</span><span class="n">run</span><span class="p">();</span>
    <span class="n">rendering_thread</span><span class="p">.</span><span class="n">join</span><span class="p">();</span>
    
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure><h2 id="configure-and-build"><span class="mr-2">Configure and Build</span><a href="#configure-and-build" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>The interested reader can fork the complete source code from <a href="https://github.com/kanmeugne/sfml2dgrid/releases/tag/sfml-2d-grid" title="The code of this tutorial is forkable from here">here</a> and run the following in a terminal at the root of the project folder :</p><h3 id="on-windows"><span class="mr-2">on windows</span><a href="#on-windows" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>  <span class="nv">$ </span>cmake  <span class="nt">-G</span> <span class="s2">"Visual Studio </span><span class="si">$(</span>Version<span class="si">)</span><span class="s2">"</span> <span class="nt">-S</span> <span class="nb">.</span> <span class="nt">-B</span> ./build 
  <span class="nv">$ </span>cmake  <span class="nt">--build</span> ./build <span class="nt">--config</span> Debug <span class="nt">--target</span> app
  <span class="nv">$ </span>./bin/Debug/app
</pre></table></code></div></div><h3 id="on-linux"><span class="mr-2">on linux</span><a href="#on-linux" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>  <span class="nv">$ </span><span class="nb">mkdir </span>build  
  <span class="nv">$ </span><span class="nb">cd </span>build
  <span class="nv">$ </span>cmake <span class="nt">-G</span> <span class="s2">"Unix Makefiles"</span> .. <span class="nt">-DCMAKE_BUILD_TYPE</span><span class="o">=</span>Debug
  <span class="nv">$ </span>cmake <span class="nt">--build</span> ./ <span class="nt">--target</span> app <span class="nt">--config</span> Debug
  <span class="nv">$ </span>../bin/Debug/app
</pre></table></code></div></div><p><img data-src="/images/sfml-2d-grid.gif" alt="screenshot" data-proofer-ignore> <em>Step by step demo : launching the 2D Grid SFML App from the terminal (built on ubuntu 18.08 with gcc 7.5)</em></p><p>You should see a clickable window with a 2D-Grid displayed on it! Enjoy and feel free to send me your feedbacks!</p><h2 id="references"><span class="mr-2">References</span><a href="#references" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><a href="https://www.sfml-dev.org/" title="Detailed view of all the SFML classes and functions">SFML-Dev.org/</a><li><a href="https://github.com/kanmeugne/sfml2dgrid/releases/tag/sfml-2d-grid" title="The code of this tutorial is forkable from here">GitHub.com/kanmeugne/sfml2dgrid</a><li><a href="/posts/sfml-cmake-windows" title="Kanmeugne's Blog : Building a Portable C++ Graphical App with CMake">Kanmeugne’s Blog : Building a Portable C++ Graphical App with CMake</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/modeling-simulation/'>modeling & simulation</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/sfml/" class="post-tag no-text-decoration" >sfml</a> <a href="/tags/cmake/" class="post-tag no-text-decoration" >cmake</a> <a href="/tags/c/" class="post-tag no-text-decoration" >c++</a> <a href="/tags/simulation/" class="post-tag no-text-decoration" >simulation</a> <a href="/tags/modeling/" class="post-tag no-text-decoration" >modeling</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Drawing+a+2D+Grid+with+SFML+-+Kanmeugne%27s+Blog&url=https%3A%2F%2Fkanmeugne.github.io%2Fposts%2Fsfml-2d-grid%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Drawing+a+2D+Grid+with+SFML+-+Kanmeugne%27s+Blog&u=https%3A%2F%2Fkanmeugne.github.io%2Fposts%2Fsfml-2d-grid%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fkanmeugne.github.io%2Fposts%2Fsfml-2d-grid%2F&text=Drawing+a+2D+Grid+with+SFML+-+Kanmeugne%27s+Blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/hadoop-and-hive/">Hadoop : query data from a self-hosted hadoop cluster</a><li><a href="/posts/hadoop-map-reduce-using-python/">Hadoop : Map/Reduce Using Python</a><li><a href="/posts/postgresql-and-apache-superset/">Apache Superset and Postgresql : connecting your database to a powerful data visualisation engine</a><li><a href="/posts/2d-grid-obstacles/">2D Grid with obstacles</a><li><a href="/posts/pheromons-evaporation/">Pheromon evaporation on a 2D Grid</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/c/">c++</a> <a class="post-tag" href="/tags/cmake/">cmake</a> <a class="post-tag" href="/tags/modeling/">modeling</a> <a class="post-tag" href="/tags/sfml/">sfml</a> <a class="post-tag" href="/tags/apache/">apache</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/simulation/">simulation</a> <a class="post-tag" href="/tags/solution-architect/">solution architect</a> <a class="post-tag" href="/tags/hive/">hive</a> <a class="post-tag" href="/tags/ipython/">ipython</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/2d-grid-obstacles/"><div class="card-body"> <em class="small" data-ts="1601740800" data-df="ll" > Oct 4, 2020 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>2D Grid with obstacles</h3><div class="text-muted small"><p> Using a regular 2D Grid to model the navigable space is a good choice if you want to simulate moving agents (ex: vehicules, pedestrians). In fact, 2D Grids can be seen as partitions of the space an...</p></div></div></a></div><div class="card"> <a href="/posts/pheromons-evaporation/"><div class="card-body"> <em class="small" data-ts="1602432000" data-df="ll" > Oct 12, 2020 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Pheromon evaporation on a 2D Grid</h3><div class="text-muted small"><p> You should now be familiar with our 2D Grid app. In a previous post, I updated its original object-oriented architecture in order to implement an affordable obstacle feature. Here, I am going to up...</p></div></div></a></div><div class="card"> <a href="/posts/sfml-cmake-windows/"><div class="card-body"> <em class="small" data-ts="1600358400" data-df="ll" > Sep 18, 2020 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Building a Portable C++ Graphical App with CMake</h3><div class="text-muted small"><p> Few months ago, I found an article that explains how to use GoogleTest and GoogleMock — as an external dependency — in a CMake project. Since the approach is amazingly straightforward, I have manag...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/sfml-cmake-windows/" class="btn btn-outline-primary" prompt="Older"><p>Building a Portable C++ Graphical App with CMake</p></a> <a href="/posts/2d-grid-obstacles/" class="btn btn-outline-primary" prompt="Newer"><p>2D Grid with obstacles</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "kanmeugne/kanmeugne.github.io", "data-repo-id": "MDEwOlJlcG9zaXRvcnkyOTc1NjcwMjA=", "data-category": "General", "data-category-id": "DIC_kwDOEbyDLM4CPQDi", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "bottom", "data-lang": "en", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/patricksimok">Patrick S. Kanmeugne</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/c/">c++</a> <a class="post-tag" href="/tags/cmake/">cmake</a> <a class="post-tag" href="/tags/modeling/">modeling</a> <a class="post-tag" href="/tags/sfml/">sfml</a> <a class="post-tag" href="/tags/apache/">apache</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/simulation/">simulation</a> <a class="post-tag" href="/tags/solution-architect/">solution architect</a> <a class="post-tag" href="/tags/hive/">hive</a> <a class="post-tag" href="/tags/ipython/">ipython</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-KFTQ8M8D5N"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-KFTQ8M8D5N'); }); </script>
